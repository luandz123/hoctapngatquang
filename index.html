<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>StudySpacer - L·ªãch H·ªçc Ng·∫Øt Qu√£ng</title>
  <link rel="icon"
    href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìö</text></svg>"
    type="image/svg+xml">
  <style>
    /* Reset CSS */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    /* Giao di·ªán ch√≠nh */
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      text-align: center;
      padding: 20px;
      background-color: #f5f7fa;
      color: #333;
      line-height: 1.6;
    }

    h1 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #2c3e50;
      text-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);
    }

    .container {
      margin: 20px auto;
      max-width: 800px;
      background-color: white;
      padding: 25px;
      border-radius: 10px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .input-group {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      margin-bottom: 15px;
    }

    input {
      padding: 10px 15px;
      width: 220px;
      margin: 8px;
      border: 1px solid #ddd;
      border-radius: 6px;
      font-size: 15px;
      transition: border-color 0.3s;
    }

    input:focus {
      outline: none;
      border-color: #3498db;
      box-shadow: 0 0 5px rgba(52, 152, 219, 0.5);
    }

    .button-group {
      margin: 15px 0;
    }

    button {
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      border: none;
      border-radius: 6px;
      font-size: 15px;
      font-weight: 500;
      transition: all 0.3s;
    }

    #addBtn {
      background-color: #3498db;
      color: white;
    }

    #addBtn:hover {
      background-color: #2980b9;
      transform: translateY(-2px);
    }

    #clearBtn {
      background-color: #e74c3c;
      color: white;
    }

    #clearBtn:hover {
      background-color: #c0392b;
      transform: translateY(-2px);
    }

    /* B·∫£ng l·ªãch h·ªçc */
    .table-container {
      overflow-x: auto;
      margin: 20px 0;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      background-color: #fff;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }

    th,
    td {
      padding: 12px;
      border: 1px solid #ddd;
      text-align: left;
      font-size: 14px;
    }

    th {
      background-color: #3498db;
      color: white;
      position: sticky;
      top: 0;
    }

    td {
      min-width: 120px;
      vertical-align: top;
    }

    td div {
      padding: 6px 8px;
      margin-bottom: 5px;
      border-radius: 4px;
      background-color: #ecf0f1;
      transition: all 0.2s;
    }

    td div:hover {
      background-color: #d5dbdb;
    }

    .completed {
      background-color: #e0e0e0;
      text-decoration: line-through;
      color: #7f8c8d;
    }

    #message {
      color: #27ae60;
      font-size: 16px;
      margin-top: 15px;
      font-weight: 500;
      height: 24px;
    }

    #notification {
      position: fixed;
      top: 20px;
      right: 20px;
      background-color: #f39c12;
      color: white;
      padding: 15px;
      border-radius: 8px;
      max-width: 300px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
      display: none;
      z-index: 1000;
      text-align: left;
    }

    /* Responsive design */
    @media (max-width: 768px) {
      .container {
        padding: 15px;
      }

      input {
        width: 100%;
        margin: 5px 0;
      }

      button {
        width: 100%;
        margin: 5px 0;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>L√™n l·ªãch h·ªçc ng·∫Øt qu√£ng</h1>

    <div class="input-group">
      <input type="text" id="subject" placeholder="M√¥n h·ªçc (VD: To√°n)">
      <input type="text" id="content" placeholder="N·ªôi dung h·ªçc (VD: H√¨nh h·ªçc)">
    </div>

    <div class="button-group">
      <button id="addBtn" onclick="addSubject()">Th√™m m√¥n h√¥m nay</button>
      <button id="clearBtn" onclick="clearSchedule()">X√≥a l·ªãch</button>
    </div>

    <div id="message"></div>

    <div class="table-container">
      <table id="scheduleTable">
        <thead id="tableHeader"></thead>
        <tbody id="scheduleBody"></tbody>
      </table>
    </div>
  </div>

  <div id="notification"></div>

  <script>
    // ƒê·ªëi t∆∞·ª£ng l∆∞u tr·ªØ l·ªãch √¥n t·∫≠p theo ng√†y
    let scheduleData = {};

    // Kh·ªüi t·∫°o khi trang ƒë∆∞·ª£c t·∫£i
    window.onload = function () {
      // Ki·ªÉm tra d·ªØ li·ªáu ƒë√£ l∆∞u trong localStorage
      const savedData = localStorage.getItem('studySchedule');
      if (savedData) {
        scheduleData = JSON.parse(savedData);
      }

      // Hi·ªÉn th·ªã l·ªãch
      renderSchedule();

      // ƒê·∫∑t h·∫πn gi·ªù ki·ªÉm tra th√¥ng b√°o m·ªói ph√∫t
      setInterval(checkNotifications, 60000);

      // Ki·ªÉm tra ngay khi t·∫£i trang
      checkNotifications();
    };

    // H√†m th√™m m√¥n h·ªçc v√†o l·ªãch
    function addSubject() {
      // L·∫•y gi√° tr·ªã t·ª´ input
      const subject = document.getElementById('subject').value.trim();
      const content = document.getElementById('content').value.trim();
      const message = document.getElementById('message');

      // Ki·ªÉm tra d·ªØ li·ªáu ƒë·∫ßu v√†o
      if (!subject || !content) {
        alert('Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß m√¥n h·ªçc v√† n·ªôi dung!');
        return;
      }

      // Ng√†y hi·ªán t·∫°i
      const today = new Date();

      // M·∫£ng kho·∫£ng c√°ch ng·∫Øt qu√£ng (th√™m 30 ng√†y)
      const intervals = [0, 1, 4, 7, 14, 30];

      // T·∫°o l·ªãch √¥n t·∫≠p theo kho·∫£ng c√°ch
      for (let i = 0; i < intervals.length; i++) {
        const reviewDate = new Date(today);
        reviewDate.setDate(today.getDate() + intervals[i]);
        const dateKey = reviewDate.toLocaleDateString('vi-VN');

        // Kh·ªüi t·∫°o m·∫£ng n·∫øu ch∆∞a c√≥
        if (!scheduleData[dateKey]) {
          scheduleData[dateKey] = [];
        }

        // Th√™m m√¥n h·ªçc v√†o l·ªãch
        scheduleData[dateKey].push({
          subject,
          content,
          completed: false,
          interval: intervals[i]
        });
      }

      // L∆∞u v√†o localStorage
      localStorage.setItem('studySchedule', JSON.stringify(scheduleData));

      // C·∫≠p nh·∫≠t giao di·ªán
      renderSchedule();

      // Hi·ªÉn th·ªã th√¥ng b√°o
      message.textContent = `ƒê√£ th√™m "${subject}" v√† l√™n l·ªãch √¥n t·∫≠p!`;
      setTimeout(() => message.textContent = '', 3000);

      // X√≥a d·ªØ li·ªáu input
      document.getElementById('subject').value = '';
      document.getElementById('content').value = '';
    }

    // H√†m hi·ªÉn th·ªã b·∫£ng l·ªãch 40 ng√†y ti·∫øp theo
    function renderSchedule() {
      const tableHeader = document.getElementById('tableHeader');
      const tableBody = document.getElementById('scheduleBody');
      tableHeader.innerHTML = '';
      tableBody.innerHTML = '';

      // Ng√†y hi·ªán t·∫°i
      const today = new Date();

      // T·∫°o h√†ng ti√™u ƒë·ªÅ
      const headerRow = document.createElement('tr');

      // T·∫°o ti√™u ƒë·ªÅ cho 40 ng√†y
      for (let i = 0; i < 40; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() + i);
        const th = document.createElement('th');

        // ƒê·ªãnh d·∫°ng ng√†y ki·ªÉu VN
        th.textContent = date.toLocaleDateString('vi-VN');

        // ƒê√°nh d·∫•u ng√†y hi·ªán t·∫°i
        if (i === 0) {
          th.style.backgroundColor = '#2980b9';
        }

        headerRow.appendChild(th);
      }
      tableHeader.appendChild(headerRow);

      // T·∫°o h√†ng d·ªØ li·ªáu
      const dataRow = document.createElement('tr');

      // ƒêi·ªÅn d·ªØ li·ªáu cho t·ª´ng ng√†y
      for (let i = 0; i < 40; i++) {
        const date = new Date(today);
        date.setDate(today.getDate() + i);
        const dateKey = date.toLocaleDateString('vi-VN');
        const td = document.createElement('td');

        // N·∫øu c√≥ l·ªãch h·ªçc v√†o ng√†y n√†y
        if (scheduleData[dateKey]) {
          const items = scheduleData[dateKey];

          // Hi·ªÉn th·ªã t·ª´ng m√¥n h·ªçc
          items.forEach((item, index) => {
            const div = document.createElement('div');

            // Hi·ªÉn th·ªã th√¥ng tin m√¥n h·ªçc
            div.textContent = `${item.subject} - ${item.content}`;

            // Th√™m th√¥ng tin th·ªùi ƒëi·ªÉm √¥n t·∫≠p (l·∫ßn th·ª© m·∫•y)
            if (item.interval) {
              const intervalText = document.createElement('small');
              intervalText.textContent = item.interval === 0 ?
                ' (H·ªçc m·ªõi)' : ` (√în l·∫ßn ${item.interval === 1 ? '1 - ng√†y ti·∫øp theo' :
                  item.interval === 3 ? '2 - sau 3 ng√†y' :
                    item.interval === 7 ? '3 - sau 1 tu·∫ßn' :
                      item.interval === 14 ? '4 - sau 2 tu·∫ßn' : '5 - sau 1 th√°ng'
                })`;
              intervalText.style.color = '#7f8c8d';
              div.appendChild(document.createElement('br'));
              div.appendChild(intervalText);
            }

            div.style.cursor = 'pointer';

            // √Åp d·ª•ng l·ªõp CSS n·∫øu ƒë√£ ho√†n th√†nh
            if (item.completed) {
              div.classList.add('completed');
            }

            // X·ª≠ l√Ω s·ª± ki·ªán khi click
            div.onclick = () => {
              item.completed = !item.completed;

              // L∆∞u v√†o localStorage
              localStorage.setItem('studySchedule', JSON.stringify(scheduleData));
              renderSchedule();
            };

            td.appendChild(div);
          });
        }
        dataRow.appendChild(td);
      }
      tableBody.appendChild(dataRow);
    }

    // H√†m ki·ªÉm tra v√† g·ª≠i th√¥ng b√°o
    function checkNotifications() {
      const now = new Date();
      const currentHour = now.getHours();
      const currentDateKey = now.toLocaleDateString('vi-VN');
      const notification = document.getElementById('notification');

      // Th·ªùi ƒëi·ªÉm th√¥ng b√°o: 7h, 12h, 19h
      const notifyHours = [7, 12, 19];

      // Ki·ªÉm tra n·∫øu ƒëang l√† gi·ªù th√¥ng b√°o
      if (notifyHours.includes(currentHour)) {
        if (scheduleData[currentDateKey]) {
          const items = scheduleData[currentDateKey];
          let pendingItems = items.filter(item => !item.completed);

          if (pendingItems.length > 0) {
            let notifyText = `H√¥m nay (${currentDateKey}) b·∫°n c·∫ßn √¥n t·∫≠p:\n`;

            pendingItems.forEach(item => {
              const intervalText = item.interval === 0 ?
                '(H·ªçc m·ªõi)' : `(√în l·∫ßn ${item.interval === 1 ? '1' :
                  item.interval === 3 ? '2' :
                    item.interval === 7 ? '3' :
                      item.interval === 14 ? '4' : '5'
                })`;

              notifyText += `- ${item.subject} - ${item.content} ${intervalText}\n`;
            });

            // Hi·ªÉn th·ªã th√¥ng b√°o HTML
            notification.textContent = notifyText;
            notification.style.display = 'block';

            // ·∫®n sau 7 gi√¢y
            setTimeout(() => notification.style.display = 'none', 7000);
          }
        }
      }
    }

    // H√†m x√≥a l·ªãch
    function clearSchedule() {
      if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô l·ªãch h·ªçc?')) {
        scheduleData = {};

        // X√≥a d·ªØ li·ªáu trong localStorage
        localStorage.removeItem('studySchedule');

        // X√≥a d·ªØ li·ªáu kh·ªèi giao di·ªán
        document.getElementById('subject').value = '';
        document.getElementById('content').value = '';
        document.getElementById('tableHeader').innerHTML = '';
        document.getElementById('scheduleBody').innerHTML = '';
        document.getElementById('message').textContent = 'ƒê√£ x√≥a to√†n b·ªô l·ªãch h·ªçc!';
        setTimeout(() => document.getElementById('message').textContent = '', 3000);
      }
    }
  </script>
</body>

</html>